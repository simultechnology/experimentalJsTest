<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/mocha.css" />
    <title>FizzBuzzのテスト</title>
    <script type="text/javascript" src="js/chai.js"></script>
    <script type="text/javascript" src="js/mocha.js"></script>
    <script type="text/javascript">
      <!--
      mocha.setup('bdd');
      mocha.setup('tdd');
      // chaiの各アサーションモジュールを読み込む
      // assertの機能を読み込み
      var assert = chai.assert;
      // expectの機能を読み込み
      var expect = chai.expect;
      // shouldの機能を読み込み
      chai.Should();

      // テスト対象のメソッド。
      var fizzbuzz = function(n) {
        if (n % 3 === 0 && n % 5 === 0)
          return "Fizz,Buzz";
        else if (n % 3 === 0)
          return "Fizz";
        else if (n % 5 === 0)
          return "Buzz";
        else
          return n;
      }
      // TDDでテストを記述
      suite('#fizzbuzz()', function() {
        test("3の場合はFizzが返ってくる", function() {
          assert.equal("Fizz", fizzbuzz(3), '3の場合はFizzが返ってくる');
        });
        test("5の場合はBuzzが返ってくる", function() {
          assert.equal("Buzz", fizzbuzz(5), '3の場合はFizzが返ってくる');
        });
        test("15の場合はFizz,Buzzが返ってくる", function() {
          assert.equal("Fizz,Buzz", fizzbuzz(15), '3の場合はFizzが返ってくる');
        });
        test("3と5の倍数以外は、数字が返ってくる", function() {
          assert.notEqual("Fizz", fizzbuzz(1), '1の場合はFizzが返ってこない');
          assert.notEqual("Buzz", fizzbuzz(1), '1の場合はBuzzが返ってこない');
          assert.equal("1", fizzbuzz(1), '1の場合は数字がそのまま返ってくる');
          assert.equal("7", fizzbuzz(7), '7の場合は数字がそのまま返ってくる');
          assert.equal("13", fizzbuzz(13), '13の場合は数字がそのまま返ってくる');
        });
      });
      // BDDでテストを記述
      describe('1から始まる整数を変換する', function() {
        it("3の倍数の時はFizzを表示する", function() {
          expect(fizzbuzz(3)).to.eql("Fizz");
        });
        it("5の倍数の時はBuzzを表示する", function() {
          // このテストがエラー
          expect(fizzbuzz(6)).to.eql("Buzz");
        });
        it("3の倍数かつ5の倍数の時はFizzBuzzを表示する", function() {
          expect(fizzbuzz(15)).to.eql("Fizz,Buzz");
        });
        it("3と5の倍数以外はその数字を表示する", function() {
          expect(fizzbuzz(2)).not.to.eql("Fizz");
          expect(fizzbuzz(2)).not.to.eql("Buzz");
          expect(fizzbuzz(1)).to.eql(1);
          expect(fizzbuzz(7)).to.eql(7);
          expect(fizzbuzz(13)).to.eql(13);
        });
      });
      -->
    </script>
  </head>
  <body>
    <div id="mocha"></div>
  </body>
  <script type="text/javascript">
  <!--
  mocha.run();
  -->
  </script>
</html>